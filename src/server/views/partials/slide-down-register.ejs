<script>
  function checkURLQueryParameters() {
    let url = new URL(window.location.href);
    let erroroccurred = url.searchParams.get("erroroccurred");
    let errorReason = url.searchParams.get("errorreason");

    if (erroroccurred != null) {
      if (erroroccurred == "true") {
        switch (errorReason) {
          case "captchanotcomplete": {
            showSlideDownNotification(
              "Complete the CAPTCHA first!",
              "#ff2222"
            );
            break;
          }
          case "usernamealreadytaken": {
            showSlideDownNotification(
              "Username is already taken!",
              "#ff2222"
            );
            break;
          }
          case "usernamenotvalid": {
            showSlideDownNotification(
              "Username may only contain letters, numbers, and underscores and must be 3 to 20 characters long!",
              "#ff2222"
            );
            break;
          }
          case "emailalreadytaken": {
            showSlideDownNotification(
              "E-mail address already taken!",
              "#ff2222"
            );
            break;
          }
          case "emailnotvalid": {
            showSlideDownNotification(
              "E-mail address is not valid!",
              "#ff2222"
            );
            break;
          }
          case "passwordnotvalid": {
            showSlideDownNotification(
              "Password can only be 8 to 64 characters!",
              "#ff2222"
            );
            break;
          }
          case "internalerror": {
            showSlideDownNotification(
              "An internal error has occurred!",
              "#ff2222"
            );
            break;
          }
        }
      }
    }
  }

  checkURLQueryParameters();

  function showSlideDownNotification(message, backgroundColor) {
    $("#slide-down-notification-text-wrapper").text(message);
    $("#slide-down-notification").css({
      "background-color": backgroundColor
    });
    $("#slide-down-notification")
      .animate({
          top: "0%"
        },
        500
      )
      .delay(2000)
      .animate({
          top: "-15%"
        },
        500
      );
  }
</script>